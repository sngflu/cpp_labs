# Лабораторная работа №4: Работа с разреженными векторами и матрицами на языке C++

## Цель работы

Целью данной лабораторной работы является изучение принципов работы с разреженными структурами данных на примере векторов и матриц. Мы исследуем эффективность разреженных и плотных векторов и матриц в различных операциях, таких как сложение, умножение на скаляр, скалярное произведение, транспонирование и возведение в степень. Также будет проведено сравнение времени выполнения операций для разреженных и плотных структур.

## Теоретическая часть

### Разреженные векторы и матрицы

Разреженные векторы и матрицы используются для представления данных, в которых большинство элементов равны нулю. Эти структуры данных позволяют экономить память и ускорять вычисления, поскольку хранят только ненулевые элементы.

**Пример разреженного вектора**: если вектор имеет размерность 1000 и только 5 элементов ненулевые, то разреженный вектор будет хранить только эти 5 значений, вместо того чтобы хранить все 1000 элементов.

**Пример разреженной матрицы**: аналогично, если матрица имеет размеры 1000x1000, но большинство ее элементов равны нулю, то разреженная матрица будет хранить только те элементы, которые отличны от нуля.

### Операции с разреженными структурами данных

- **Сложение**: сложение двух разреженных структур данных производится поэлементно, с учетом только ненулевых значений.
- **Скалярное произведение**: вычисляется для разреженных векторов путем умножения соответствующих элементов и суммирования результатов.
- **Умножение на скаляр**: каждый ненулевой элемент вектора или матрицы умножается на скалярное значение.
- **Транспонирование**: операция изменения строк и столбцов в матрице.
- **Возведение в степень**: возведение всех ненулевых элементов разреженной матрицы или вектора в указанную степень.

### Плотные структуры данных

Плотные векторы и матрицы хранят все свои элементы, независимо от того, равны ли они нулю. Это может быть неэффективно для больших структур с множеством нулевых элементов, но такие структуры проще и быстрее обрабатываются в стандартных библиотеках, так как не требуют дополнительных усилий для управления пустыми элементами.

## Практическая часть

### Структуры данных

1. **Разреженные векторы** — реализованы с использованием хеш-таблицы (unordered_map), где ключом является индекс элемента, а значением — сам элемент.
2. **Плотные векторы** — представлены в виде обычного массива, где каждый элемент массива содержит соответствующее значение вектора.
3. **Разреженные матрицы** — аналогично разреженным векторам, но с использованием пар (строка, столбец) в качестве ключа для хеш-таблицы.
4. **Плотные матрицы** — представлены в виде двумерного массива.

### Операции

Все описанные выше операции были реализованы для разреженных и плотных векторов и матриц, включая:

- Сложение
- Скалярное произведение
- Умножение на скаляр
- Транспонирование
- Возведение в степень

### Результаты

Время выполнения операций для разреженных и плотных структур было измерено с помощью библиотеки C++ `<chrono>`. Результаты представлены ниже:

#### Разреженные векторы

```
Разреженный Вектор 1: (10: 3.5) (3: 2.5) (0: 1.5)
Разреженный Вектор 2: (10: -3.5) (5: 5.5) (3: 4.5)
Сумма Разреженных Векторов: (5: 5.5) (3: 7) (0: 1.5)
Скалярное произведение Разреженных Векторов: -1
Разреженный Вектор 1, умноженный на 2: (0: 3) (3: 5) (10: 7)
Разреженный Вектор 1, возведенный в квадрат: (0: 2.25) (3: 6.25) (10: 12.25)
```

#### Плотные векторы

```
Плотный Вектор 1: (0: 1.5) (1: 0) (2: 0) (3: 2) (4: 0) (5: 0) (6: 0) (7: 0) (8: 0) (9: 0) (10: 3.5)
Плотный Вектор 2: (0: 0) (1: 0) (2: 0) (3: 4.5) (4: 0) (5: 5.5) (6: 0) (7: 0) (8: 0) (9: 0) (10: -3.5)
Сумма Плотных Векторов: (0: 1.5) (1: 0) (2: 0) (3: 6.5) (4: 0) (5: 5.5) (6: 0) (7: 0) (8: 0) (9: 0) (10: 0)
Скалярное произведение Плотных Векторов: -3.25
Плотный Вектор 1, умноженный на 2: (0: 3) (1: 0) (2: 0) (3: 4) (4: 0) (5: 0) (6: 0) (7: 0) (8: 0) (9: 0) (10: 7)
Плотный Вектор 1, возведенный в квадрат: (0: 2.25) (1: 0) (2: 0) (3: 4) (4: 0) (5: 0) (6: 0) (7: 0) (8: 0) (9: 0) (10: 12.25)
```

#### Разреженные матрицы

```
Разреженная Матрица 1: (2, 2): 4 (1, 1): 5 (0, 2): 2 (0, 0): 1
Разреженная Матрица 2: (1, 1): -3 (2, 2): 5 (0, 0): 4
Сумма Разреженных Матриц: (2, 2): 9 (1, 1): 2 (0, 2): 2 (0, 0): 5
Произведение Разреженных Матриц: (0, 0): 4 (0, 2): 10 (1, 1): -15 (2, 2): 20
Транспонированная Разреженная Матрица 1: (0, 0): 1 (2, 0): 2 (1, 1): 5 (2, 2): 4
Обратная Разреженная Матрица 1: (2, 2): 0.25 (1, 1): 0.2 (0, 2): -0.5 (0, 0): 1
Разреженная Матрица 1 в квадрате: (0, 0): 5 (0, 2): 8 (1, 1): 25 (2, 0): 8 (2, 2): 16
```

#### Плотные матрицы

```
Плотная Матрица 1:
1 0 2
0 2 0
0 0 4
Плотная Матрица 2:
4 0 0
0 -3 0
5 0 0
Сумма Плотных Матриц:
5 0 2
0 -1 0
5 0 4
Произведение Плотных Матриц:
14 0 0
0 -6 0
20 0 0
Транспонированная Плотная Матрица 1:
1 0 0
0 2 0
2 0 4
Обратная Плотная Матрица 1:
1 0 -0.5
0 0.5 0
0 0 0.25
Плотная Матрица 1 в квадрате:
1 0 10
0 4 0
0 0 16
```

### Время выполнения операций

| Операция                       | Разреженные структуры (мс) | Плотные структуры (мс) |
| ------------------------------ | -------------------------- | ---------------------- |
| Время сложения векторов        | 0.563                      | 4.243                  |
| Время скалярного произведения  | 0.229                      | 0.961                  |
| Время умножения на скаляр      | 0.576                      | 2.815                  |
| Время возведения в степень (3) | 57.393                     | 84.231                 |

## Заключение

В ходе работы было продемонстрировано, как разреженные и плотные структуры данных могут быть эффективно использованы для решения различных задач. Операции с разреженными структурами оказываются быстрее для векторов и матриц, содержащих множество нулевых элементов. Время выполнения операций для разреженных структур значительно меньше, что подтверждается результатами тестов.
